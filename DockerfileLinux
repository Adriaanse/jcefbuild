FROM friwidev/jcefdocker:linux-latest AS stage

#Declare build type argument (Release or Debug)
ARG BUILD_TYPE

#Declare architecture argument (arm64, arm/v7, 386 or amd64)
ARG TARGETARCH

#Declare git args
ARG REPO
ARG REF

WORKDIR /builder
#Copy existing sources, if any
COPY jcef /jcef

#Copy and launch run script
COPY scripts/run_linux.sh .
RUN chmod +x run_linux.sh
RUN ./run_linux.sh

#Export built files
FROM scratch AS export-stage
COPY --from=stage /jcef/binary_distrib.tar.gz .


